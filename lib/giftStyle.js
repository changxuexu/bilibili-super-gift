/**
 * 连击效果样式库
 **/

this.combo = this.combo || {};

combo.imagesURL = 'images/';

combo.lib = {
	1:{
		giftName: '辣条',
		front: '#ffcaa7',
		back: '#ffa062',
		fontColor: '#e25900',
		bgImage: null,
		src: combo.imagesURL +　'gift-1.png',
		f: 8
	},
	2:{
		giftName: '王♂者肥皂',
		front: '#ecedff',
		back: '#c8caf1',
		fontColor: '#6f72b3',
		bgImage: null,
		src: combo.imagesURL +　'gift-2.png',
		f: 20
	},
	3:{
		giftName: 'B坷垃',
		front: '#fff8a8',
		back: '#f1e777',
		fontColor: '#918b49',
		bgImage: null,
		src: combo.imagesURL +　'gift-3.png',
		f: 6
	},
	4:{
		giftName: '喵娘',
		front:'#ffd7ed',
		back:'#ffb1d9',
		fontColor: '#cf66a0',
		bgImage: null,
		src: combo.imagesURL +　'gift-4.png',
		f: 10
	},
	5:{
		giftName: '锅',
		front: '#e2ffbd',
		back: '#c4eb9e',
		fontColor: '#8aa372',
		bgImage: null,
		src: combo.imagesURL +　'gift-5.png',
		f: 8
	},
	6:{
		giftName: '亿元',
		front: '#edf6fe',
		back: '#d7e2eb',
		fontColor: '#808a92',
		bgImage: null,
		src: combo.imagesURL +　'gift-6.png',
		f: 12
	},
	7:{
		giftName: '爱心便当',
		fontColor: '#cf66a0',
		bgImage: combo.imagesURL + 'gift-9-bg.png',
		src: combo.imagesURL +　'gift-9.png',
		f: 11
	},
	8:{
		giftName: '胖次',
		fontColor: '#669cce',
		bgImage: combo.imagesURL + 'gift-10-bg.png',
		src: combo.imagesURL +　'gift-10.png',
		f: 20
	}
};

combo.createShapeCloud = function(optCloud) {

	var shape_container = new createjs.Container();
	
	var g = new createjs.Graphics();
	g.setStrokeStyle(optCloud.strokeSize)
	 .beginStroke(optCloud.strokeColor)
	 .moveTo(249.751,27.749)
	 .bt(249.751,18.36,242.14,10.749,232.751,10.749)
	 .bt(232.629,10.749,232.51,10.759,232.389,10.762)
	 .bt(230.349,10.087,228.174,9.707,225.908,9.707)
	 .bt(221.18,9.707,216.839,11.312,213.366,13.990)
	 .bt(209.531,10.103,204.208,7.691,198.314,7.691)
	 .bt(193.306,7.691,188.71,9.433,185.085,12.34)
	 .bt(182.207,10.365,178.727,9.207,174.971,9.207)
	 .bt(174.968,9.207,174.966,9.207,174.963,9.207)
	 .bt(170.565,5.349,164.81,3,158.499,3)
	 .bt(150.729,3,143.8,6.555,139.216,12.116)
	 .bt(138.473,11.932,137.7,11.824,136.9,11.824)
	 .bt(134.53,11.824,132.37,12.688,130.695,14.107)
	 .bt(128.479,13.084,126.02,12.498,123.418,12.498)
	 .bt(121.261,12.498,119.206,12.911,117.301,13.629)
	 .bt(113.716,7.69,107.227,3.706,99.783,3.706)
	 .bt(94.915,3.706,90.448,5.409,86.932,8.245)
	 .bt(83.206,9.232,79.863,11.159,77.204,13.791)
	 .bt(73.391,9.793,68.025,7.29,62.064,7.29)
	 .bt(61.389,7.29,60.723,7.327,60.064,7.39)
	 .bt(56.134,5.061,51.558,3.707,46.658,3.707)
	 .bt(43.892,3.707,41.227,4.135,38.722,4.924)
	 .bt(35.641,3.685,32.278,3,28.754,3)
	 .bt(13.979,3,2.002,14.977,2.002,29.752)
	 .bt(2.002,44.527,13.979,56.504,28.753998,56.504)
	 .bt(31.929,56.504,34.971,55.942,37.796,54.925995)
	 .bt(40.566,55.914,43.549,56.456994,46.658,56.456994)
	 .bt(53.843,56.457,60.354,53.57999,65.11,48.919995)
	 .bt(66.081,48.776994,67.038,48.58899,67.961,48.31699)
	 .bt(71.146,52.21399,75.982,54.70799,81.408,54.70799)
	 .bt(85.458,54.70799,89.174,53.31399,92.124,50.98899)
	 .bt(92.25,50.99099,92.375,50.99899,92.502,50.99899)
	 .bt(99.818,50.99899,106.282,47.37999,110.22399,41.84099)
	 .bt(110.33898,41.77299,110.448,41.695984,110.56198,41.62598)
	 .bt(113.74699,45.12098,118.31698,47.33199,123.41798,47.33199)
	 .bt(128.921,47.33199,133.81996,44.77299,137.01197,40.786985)
	 .bt(141.37397,48.10299,149.36197,53.00498,158.49897,53.00498)
	 .bt(165.74997,53.00498,172.26898,49.90898,176.83498,44.97798)
	 .bt(178.95498,44.75798,180.96297,44.16798,182.79797,43.27398)
	 .bt(186.66298,47.44598,192.17696,50.06498,198.31396,50.06498)
	 .bt(203.40397,50.06498,208.06695,48.265984,211.71397,45.271984)
	 .bt(215.41198,48.78798,220.40196,50.957984,225.90796,50.957984)
	 .bt(233.48797,50.957984,240.09497,46.856985,243.67897,40.76398)
	 .bt(247.388,37.645,249.751,32.975,249.751,27.749);
	var shape = new createjs.Shape(g);
	shape.shadow = new createjs.Shadow("#ccc", 0, 4, 8);
	shape_container.addChild(shape);

	g = new createjs.Graphics();
	g.beginStroke(null)
	 .beginFill(optCloud.back)
	 .moveTo(50.325,45.567)
	 .bt(47.202,49.82,42.85,53.109,37.795,54.926)
	 .bt(40.566,55.914,43.548,56.457,46.658,56.457)
	 .bt(53.843,56.457,60.353,53.581,65.11,48.92)
	 .bt(64.113,49.067,63.101,49.166,62.062,49.166)
	 .bt(57.712,49.166,53.673,47.838,50.325,45.567)
	 .moveTo(76.198,43.641)
	 .bt(73.872,45.776,71.067,47.398,67.961,48.316)
	 .bt(71.146,52.213,75.983,54.707,81.408,54.707)
	 .bt(85.457,54.707,89.174,53.314,92.124,50.989)
	 .bt(85.783,50.881,80.106,48.063,76.198,43.641)
	 .moveTo(48.79,12.037)
	 .bt(51.919,9.469,55.806,7.794,60.063,7.39)
	 .bt(56.133,5.061,51.558,3.707,46.658,3.707)
	 .bt(43.892,3.707,41.226,4.135,38.721,4.924)
	 .bt(42.614,6.491,46.054,8.945,48.79,12.037)
	 .moveTo(232.389,10.762)
	 .bt(230.349,10.086,228.174,9.707,225.907,9.707)
	 .bt(221.179,9.707,216.838,11.312,213.365,13.99)
	 .bt(215.105,15.754,216.539,17.821,217.581,20.106)
	 .bt(220.33,14.662,225.907,10.898,232.389,10.762)
	 .moveTo(218.113,36.362)
	 .bt(216.786,39.87,214.558,42.934,211.712,45.271)
	 .bt(215.41,48.788,220.401,50.958,225.908,50.958)
	 .bt(233.49,50.958,240.098,46.855,243.682,40.759)
	 .bt(240.726,43.245,236.916,44.748,232.751,44.748)
	 .bt(226.51,44.748,221.07,41.375,218.113,36.362)
	 .moveTo(110.963,17.754)
	 .bt(112.729,15.946,114.893,14.538,117.301,13.63)
	 .bt(113.716,7.691,107.227,3.707,99.783,3.707)
	 .bt(94.914,3.707,90.447,5.411,86.931,8.246)
	 .bt(88.711,7.775,90.572,7.499,92.501,7.499)
	 .bt(100.292,7.499,107.122,11.598,110.963,17.754)
	 .moveTo(176.831,44.98)
	 .bt(178.953,44.76,180.962,44.171,182.798,43.276)
	 .bt(181.895,42.302,181.082,41.243,180.372,40.113)
	 .bt(179.391,41.879,178.195,43.508,176.831,44.98)
	 .moveTo(110.22,41.844)
	 .bt(110.336,41.775,110.446,41.698,110.561,41.627)
	 .bt(110.527,41.59,110.489,41.558,110.456,41.521)
	 .bt(110.38,41.631,110.297,41.735,110.22,41.844)
	 .moveTo(180.878,16.855)
	 .bt(182.054,15.153,183.474,13.632,185.085,12.341)
	 .bt(182.207,10.366,178.726,9.207,174.97,9.207)
	 .bt(174.967,9.207,174.965,9.207,174.962,9.207)
	 .bt(177.395,11.341,179.418,13.931,180.878,16.855)
	 .moveTo(139.217,12.116)
	 .bt(138.474,11.932,137.701,11.824,136.9,11.824)
	 .bt(134.53,11.824,132.369,12.688,130.694,14.108)
	 .bt(132.585,14.98,134.302,16.166,135.754,17.623)
	 .bt(136.665,15.63,137.839,13.787,139.217,12.116);
	shape = new createjs.Shape(g);
	shape_container.addChild(shape);

	g.beginFill(optCloud.front)
	 .moveTo(232.751, 10.749)
	 .bt(226.114,10.749,220.381,14.56,217.581,20.106)
	 .bt(214.243,12.788,206.881,7.692,198.313,7.692)
	 .bt(191.08,7.692,184.7,11.323,180.878,16.855)
	 .bt(176.779,8.644,168.3,3.001,158.499,3.001)
	 .bt(148.395,3.001,139.697,8.998,135.754,17.623)
	 .bt(132.601,14.459,128.238,12.499,123.418,12.499)
	 .bt(118.534,12.499,114.126,14.515,110.963,17.754)
	 .bt(107.122,11.598,100.292,7.499,92.501,7.499)
	 .bt(86.536,7.499,81.133,9.902,77.203,13.791)
	 .bt(73.39,9.793,68.024,7.29,62.063,7.29)
	 .bt(57.024,7.29,52.403,9.072,48.79,12.037)
	 .bt(43.889,6.497,36.73,3,28.752,3)
	 .bt(13.977,3,2,14.977,2,29.752)
	 .bt(2,44.527,13.977,56.504,28.752,56.504)
	 .bt(37.609,56.504,45.457,52.197,50.325,45.567)
	 .bt(53.673,47.838,57.712,49.166,62.062,49.166)
	 .bt(67.519,49.166,72.472,47.061,76.198,43.641)
	 .bt(80.183,48.151,86.007,50.999,92.499,50.999)
	 .bt(99.957,50.999,106.537,47.243,110.455,41.521)
	 .bt(113.644,45.08,118.261,47.332,123.416,47.332)
	 .bt(128.919,47.332,133.818,44.773,137.01,40.787)
	 .bt(141.372,48.103,149.36,53.005,158.497,53.005)
	 .bt(167.911,53.005,176.107,47.799,180.372,40.112)
	 .bt(184.119,46.082,190.743,50.064,198.312,50.064)
	 .bt(207.374,50.064,215.085,44.364,218.113,36.362)
	 .bt(221.07,41.375,226.51,44.748,232.751,44.748)
	 .bt(242.14,44.748,249.751,37.137,249.751,27.748)
	 .bt(249.751,18.359,242.139,10.749,232.751,10.749);
	shape = new createjs.Shape(g);
	shape_container.addChild(shape);

	return shape_container;
};

combo.createShapeCross = function(optCross) {

	var g = new createjs.Graphics();
	
	g.beginStroke(null)
	 .beginFill(optCross.color)
	 .moveTo(263.315,28)
	 .lt(265.314,26.001)
	 .bt(265.738,25.577,266,24.991,266,24.344)
	 .bt(266,23.05,264.951,22,263.656,22)
	 .bt(263.009,22,262.423,22.262,261.999,22.686)
	 .lt(260,24.685)
	 .lt(258.001,22.686)
	 .bt(257.577,22.262,256.991,22,256.344,22)
	 .bt(255.04999999999998,22,254,23.049,254,24.344)
	 .bt(254,24.991,254.262,25.577,254.686,26.001)
	 .lt(256.685,28)
	 .lt(254.686,29.999)
	 .bt(254.262,30.423,254,31.009,254,31.656)
	 .bt(254,32.949999999999996,255.049,34,256.344,34)
	 .bt(256.991,34,257.577,33.738,258.001,33.314)
	 .lt(260,31.315)
	 .lt(261.999,33.314)
	 .bt(262.423,33.738,263.009,34,263.656,34)
	 .bt(264.95,34,266,32.951,266,31.656)
	 .bt(266,31.009,265.738,30.423,265.314,29.999)
	 .lt(263.315,28);

	var shape = new createjs.Shape(g);
	return shape;
};

combo.textEllipsis = function(str) {
	for(var i = j = 0, newStr = '', len = str.length; i < len; i++) {
		if( encodeURI(str[i]).length > 8 ) {
			j += 2;
		}
		else {
			j += 1;
		}
		newStr += str[i];
		if( j >= 8 ) {
			return (newStr + '...');
		}
	}
};

combo.getTextLength = function(str) {
	for(var i = j = 0, len = str.length; i < len; i++) {
		if( encodeURI(str[i]).length > 8 ) {
			j += 1.2;
		}
		else {
			j += 1;
		}
	}
	return j;
}